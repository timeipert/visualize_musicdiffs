(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function St(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function rr(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function de(t){let e,n,r;t.length!==2?(e=St,n=(s,f)=>St(t(s),f),r=(s,f)=>t(s)-f):(e=t===St||t===rr?t:ir,n=t,r=t);function i(s,f,u=0,l=s.length){if(u<l){if(e(f,f)!==0)return l;do{const c=u+l>>>1;n(s[c],f)<0?u=c+1:l=c}while(u<l)}return u}function o(s,f,u=0,l=s.length){if(u<l){if(e(f,f)!==0)return l;do{const c=u+l>>>1;n(s[c],f)<=0?u=c+1:l=c}while(u<l)}return u}function a(s,f,u=0,l=s.length){const c=i(s,f,u,l-1);return c>u&&r(s[c-1],f)>-r(s[c],f)?c-1:c}return{left:i,center:a,right:o}}function ir(){return 0}function ar(t){return t===null?NaN:+t}const or=de(St),sr=or.right;de(ar).center;class Me extends Map{constructor(e,n=lr){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get($e(this,e))}has(e){return super.has($e(this,e))}set(e,n){return super.set(ur(this,e),n)}delete(e){return super.delete(fr(this,e))}}function $e({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function ur({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function fr({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function lr(t){return t!==null&&typeof t=="object"?t.valueOf():t}const cr=Math.sqrt(50),hr=Math.sqrt(10),dr=Math.sqrt(2);function It(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=cr?10:o>=hr?5:o>=dr?2:1;let s,f,u;return i<0?(u=Math.pow(10,-i)/a,s=Math.round(t*u),f=Math.round(e*u),s/u<t&&++s,f/u>e&&--f,u=-u):(u=Math.pow(10,i)*a,s=Math.round(t/u),f=Math.round(e/u),s*u<t&&++s,f*u>e&&--f),f<s&&.5<=n&&n<2?It(t,e,n*2):[s,f,u]}function pr(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,o,a]=r?It(e,t,n):It(t,e,n);if(!(o>=i))return[];const s=o-i+1,f=new Array(s);if(r)if(a<0)for(let u=0;u<s;++u)f[u]=(o-u)/-a;else for(let u=0;u<s;++u)f[u]=(o-u)*a;else if(a<0)for(let u=0;u<s;++u)f[u]=(i+u)/-a;else for(let u=0;u<s;++u)f[u]=(i+u)*a;return f}function te(t,e,n){return e=+e,t=+t,n=+n,It(t,e,n)[2]}function gr(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?te(e,t,n):te(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function ee(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function mr(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,o=new Array(i);++r<i;)o[r]=t+r*n;return o}function cn(t,e){let n=0;for(let r of t)(r=+r)&&(n+=r);return n}function yr(t){return t}var _r=4,Se=1e-6;function wr(t){return"translate(0,"+t+")"}function vr(t){return e=>+t(e)}function xr(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function br(){return!this.__axis}function kr(t,e){var n=[],r=null,i=null,o=6,a=6,s=3,f=typeof window<"u"&&window.devicePixelRatio>1?0:.5,u=-1,l="x",c=wr;function h(y){var A=r??(e.ticks?e.ticks.apply(e,n):e.domain()),d=i??(e.tickFormat?e.tickFormat.apply(e,n):yr),g=Math.max(o,0)+s,p=e.range(),m=+p[0]+f,w=+p[p.length-1]+f,v=(e.bandwidth?xr:vr)(e.copy(),f),k=y.selection?y.selection():y,b=k.selectAll(".domain").data([null]),_=k.selectAll(".tick").data(A,e).order(),x=_.exit(),M=_.enter().append("g").attr("class","tick"),S=_.select("line"),N=_.select("text");b=b.merge(b.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),_=_.merge(M),S=S.merge(M.append("line").attr("stroke","currentColor").attr(l+"2",u*o)),N=N.merge(M.append("text").attr("fill","currentColor").attr(l,u*g).attr("dy","0.32em")),y!==k&&(b=b.transition(y),_=_.transition(y),S=S.transition(y),N=N.transition(y),x=x.transition(y).attr("opacity",Se).attr("transform",function(E){return isFinite(E=v(E))?c(E+f):this.getAttribute("transform")}),M.attr("opacity",Se).attr("transform",function(E){var $=this.parentNode.__axis;return c(($&&isFinite($=$(E))?$:v(E))+f)})),x.remove(),b.attr("d",a?"M"+u*a+","+m+"H"+f+"V"+w+"H"+u*a:"M"+f+","+m+"V"+w),_.attr("opacity",1).attr("transform",function(E){return c(v(E)+f)}),S.attr(l+"2",u*o),N.attr(l,u*g).text(d),k.filter(br).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor","end"),k.each(function(){this.__axis=v})}return h.scale=function(y){return arguments.length?(e=y,h):e},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(y){return arguments.length?(n=y==null?[]:Array.from(y),h):n.slice()},h.tickValues=function(y){return arguments.length?(r=y==null?null:Array.from(y),h):r&&r.slice()},h.tickFormat=function(y){return arguments.length?(i=y,h):i},h.tickSize=function(y){return arguments.length?(o=a=+y,h):o},h.tickSizeInner=function(y){return arguments.length?(o=+y,h):o},h.tickSizeOuter=function(y){return arguments.length?(a=+y,h):a},h.tickPadding=function(y){return arguments.length?(s=+y,h):s},h.offset=function(y){return arguments.length?(f=+y,h):f},h}function Ar(t){return kr(_r,t)}var Nr={value:()=>{}};function pe(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Et(n)}function Et(t){this._=t}function Mr(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Et.prototype=pe.prototype={constructor:Et,on:function(t,e){var n=this._,r=Mr(t+"",n),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(t=r[o]).type)&&(i=$r(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<a;)if(i=(t=r[o]).type)n[i]=Ee(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Ee(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Et(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};function $r(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Ee(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Nr,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var ne="http://www.w3.org/1999/xhtml";const Le={svg:"http://www.w3.org/2000/svg",xhtml:ne,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Gt(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Le.hasOwnProperty(e)?{space:Le[e],local:t}:t}function Sr(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===ne&&e.documentElement.namespaceURI===ne?e.createElement(t):e.createElementNS(n,t)}}function Er(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function hn(t){var e=Gt(t);return(e.local?Er:Sr)(e)}function Lr(){}function ge(t){return t==null?Lr:function(){return this.querySelector(t)}}function Tr(t){typeof t!="function"&&(t=ge(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,s=r[i]=new Array(a),f,u,l=0;l<a;++l)(f=o[l])&&(u=t.call(f,f.__data__,l,o))&&("__data__"in f&&(u.__data__=f.__data__),s[l]=u);return new R(r,this._parents)}function dn(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Cr(){return[]}function pn(t){return t==null?Cr:function(){return this.querySelectorAll(t)}}function Ir(t){return function(){return dn(t.apply(this,arguments))}}function Rr(t){typeof t=="function"?t=Ir(t):t=pn(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a=e[o],s=a.length,f,u=0;u<s;++u)(f=a[u])&&(r.push(t.call(f,f.__data__,u,a)),i.push(f));return new R(r,i)}function gn(t){return function(){return this.matches(t)}}function mn(t){return function(e){return e.matches(t)}}var Or=Array.prototype.find;function Dr(t){return function(){return Or.call(this.children,t)}}function zr(){return this.firstElementChild}function Br(t){return this.select(t==null?zr:Dr(typeof t=="function"?t:mn(t)))}var Pr=Array.prototype.filter;function Fr(){return Array.from(this.children)}function qr(t){return function(){return Pr.call(this.children,t)}}function Hr(t){return this.selectAll(t==null?Fr:qr(typeof t=="function"?t:mn(t)))}function Vr(t){typeof t!="function"&&(t=gn(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,s=r[i]=[],f,u=0;u<a;++u)(f=o[u])&&t.call(f,f.__data__,u,o)&&s.push(f);return new R(r,this._parents)}function yn(t){return new Array(t.length)}function Gr(){return new R(this._enter||this._groups.map(yn),this._parents)}function Rt(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Rt.prototype={constructor:Rt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Xr(t){return function(){return t}}function Jr(t,e,n,r,i,o){for(var a=0,s,f=e.length,u=o.length;a<u;++a)(s=e[a])?(s.__data__=o[a],r[a]=s):n[a]=new Rt(t,o[a]);for(;a<f;++a)(s=e[a])&&(i[a]=s)}function Yr(t,e,n,r,i,o,a){var s,f,u=new Map,l=e.length,c=o.length,h=new Array(l),y;for(s=0;s<l;++s)(f=e[s])&&(h[s]=y=a.call(f,f.__data__,s,e)+"",u.has(y)?i[s]=f:u.set(y,f));for(s=0;s<c;++s)y=a.call(t,o[s],s,o)+"",(f=u.get(y))?(r[s]=f,f.__data__=o[s],u.delete(y)):n[s]=new Rt(t,o[s]);for(s=0;s<l;++s)(f=e[s])&&u.get(h[s])===f&&(i[s]=f)}function Wr(t){return t.__data__}function Ur(t,e){if(!arguments.length)return Array.from(this,Wr);var n=e?Yr:Jr,r=this._parents,i=this._groups;typeof t!="function"&&(t=Xr(t));for(var o=i.length,a=new Array(o),s=new Array(o),f=new Array(o),u=0;u<o;++u){var l=r[u],c=i[u],h=c.length,y=Zr(t.call(l,l&&l.__data__,u,r)),A=y.length,d=s[u]=new Array(A),g=a[u]=new Array(A),p=f[u]=new Array(h);n(l,c,d,g,p,y,e);for(var m=0,w=0,v,k;m<A;++m)if(v=d[m]){for(m>=w&&(w=m+1);!(k=g[w])&&++w<A;);v._next=k||null}}return a=new R(a,r),a._enter=s,a._exit=f,a}function Zr(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Kr(){return new R(this._exit||this._groups.map(yn),this._parents)}function Qr(t,e,n){var r=this.enter(),i=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function jr(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,a=Math.min(i,o),s=new Array(i),f=0;f<a;++f)for(var u=n[f],l=r[f],c=u.length,h=s[f]=new Array(c),y,A=0;A<c;++A)(y=u[A]||l[A])&&(h[A]=y);for(;f<i;++f)s[f]=n[f];return new R(s,this._parents)}function ti(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,o=r[i],a;--i>=0;)(a=r[i])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function ei(t){t||(t=ni);function e(c,h){return c&&h?t(c.__data__,h.__data__):!c-!h}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a=n[o],s=a.length,f=i[o]=new Array(s),u,l=0;l<s;++l)(u=a[l])&&(f[l]=u);f.sort(e)}return new R(i,this._parents).order()}function ni(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function ri(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function ii(){return Array.from(this)}function ai(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null}function oi(){let t=0;for(const e of this)++t;return t}function si(){return!this.node()}function ui(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,a=i.length,s;o<a;++o)(s=i[o])&&t.call(s,s.__data__,o,i);return this}function fi(t){return function(){this.removeAttribute(t)}}function li(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ci(t,e){return function(){this.setAttribute(t,e)}}function hi(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function di(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function pi(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function gi(t,e){var n=Gt(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?li:fi:typeof e=="function"?n.local?pi:di:n.local?hi:ci)(n,e))}function _n(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function mi(t){return function(){this.style.removeProperty(t)}}function yi(t,e,n){return function(){this.style.setProperty(t,e,n)}}function _i(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function wi(t,e,n){return arguments.length>1?this.each((e==null?mi:typeof e=="function"?_i:yi)(t,e,n??"")):rt(this.node(),t)}function rt(t,e){return t.style.getPropertyValue(e)||_n(t).getComputedStyle(t,null).getPropertyValue(e)}function vi(t){return function(){delete this[t]}}function xi(t,e){return function(){this[t]=e}}function bi(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function ki(t,e){return arguments.length>1?this.each((e==null?vi:typeof e=="function"?bi:xi)(t,e)):this.node()[t]}function wn(t){return t.trim().split(/^|\s+/)}function me(t){return t.classList||new vn(t)}function vn(t){this._node=t,this._names=wn(t.getAttribute("class")||"")}vn.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function xn(t,e){for(var n=me(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function bn(t,e){for(var n=me(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Ai(t){return function(){xn(this,t)}}function Ni(t){return function(){bn(this,t)}}function Mi(t,e){return function(){(e.apply(this,arguments)?xn:bn)(this,t)}}function $i(t,e){var n=wn(t+"");if(arguments.length<2){for(var r=me(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?Mi:e?Ai:Ni)(n,e))}function Si(){this.textContent=""}function Ei(t){return function(){this.textContent=t}}function Li(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Ti(t){return arguments.length?this.each(t==null?Si:(typeof t=="function"?Li:Ei)(t)):this.node().textContent}function Ci(){this.innerHTML=""}function Ii(t){return function(){this.innerHTML=t}}function Ri(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Oi(t){return arguments.length?this.each(t==null?Ci:(typeof t=="function"?Ri:Ii)(t)):this.node().innerHTML}function Di(){this.nextSibling&&this.parentNode.appendChild(this)}function zi(){return this.each(Di)}function Bi(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Pi(){return this.each(Bi)}function Fi(t){var e=typeof t=="function"?t:hn(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function qi(){return null}function Hi(t,e){var n=typeof t=="function"?t:hn(t),r=e==null?qi:typeof e=="function"?e:ge(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Vi(){var t=this.parentNode;t&&t.removeChild(this)}function Gi(){return this.each(Vi)}function Xi(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ji(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Yi(t){return this.select(t?Ji:Xi)}function Wi(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Ui(t){return function(e){t.call(this,e,this.__data__)}}function Zi(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function Ki(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,o;n<i;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function Qi(t,e,n){return function(){var r=this.__on,i,o=Ui(e);if(r){for(var a=0,s=r.length;a<s;++a)if((i=r[a]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=e;return}}this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i]}}function ji(t,e,n){var r=Zi(t+""),i,o=r.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var f=0,u=s.length,l;f<u;++f)for(i=0,l=s[f];i<o;++i)if((a=r[i]).type===l.type&&a.name===l.name)return l.value}return}for(s=e?Qi:Ki,i=0;i<o;++i)this.each(s(r[i],e,n));return this}function kn(t,e,n){var r=_n(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function ta(t,e){return function(){return kn(this,t,e)}}function ea(t,e){return function(){return kn(this,t,e.apply(this,arguments))}}function na(t,e){return this.each((typeof e=="function"?ea:ta)(t,e))}function*ra(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length,a;i<o;++i)(a=r[i])&&(yield a)}var ye=[null];function R(t,e){this._groups=t,this._parents=e}function wt(){return new R([[document.documentElement]],ye)}function ia(){return this}R.prototype=wt.prototype={constructor:R,select:Tr,selectAll:Rr,selectChild:Br,selectChildren:Hr,filter:Vr,data:Ur,enter:Gr,exit:Kr,join:Qr,merge:jr,selection:ia,order:ti,sort:ei,call:ri,nodes:ii,node:ai,size:oi,empty:si,each:ui,attr:gi,style:wi,property:ki,classed:$i,text:Ti,html:Oi,raise:zi,lower:Pi,append:Fi,insert:Hi,remove:Gi,clone:Yi,datum:Wi,on:ji,dispatch:na,[Symbol.iterator]:ra};function ut(t){return typeof t=="string"?new R([[document.querySelector(t)]],[document.documentElement]):new R([[t]],ye)}function aa(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Te(t,e){if(t=aa(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}function oa(t){return typeof t=="string"?new R([document.querySelectorAll(t)],[document.documentElement]):new R([dn(t)],ye)}function _e(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function An(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function vt(){}var dt=.7,Ot=1/dt,nt="\\s*([+-]?\\d+)\\s*",pt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",H="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",sa=/^#([0-9a-f]{3,8})$/,ua=new RegExp(`^rgb\\(${nt},${nt},${nt}\\)$`),fa=new RegExp(`^rgb\\(${H},${H},${H}\\)$`),la=new RegExp(`^rgba\\(${nt},${nt},${nt},${pt}\\)$`),ca=new RegExp(`^rgba\\(${H},${H},${H},${pt}\\)$`),ha=new RegExp(`^hsl\\(${pt},${H},${H}\\)$`),da=new RegExp(`^hsla\\(${pt},${H},${H},${pt}\\)$`),Ce={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};_e(vt,j,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Ie,formatHex:Ie,formatHex8:pa,formatHsl:ga,formatRgb:Re,toString:Re});function Ie(){return this.rgb().formatHex()}function pa(){return this.rgb().formatHex8()}function ga(){return Nn(this).formatHsl()}function Re(){return this.rgb().formatRgb()}function j(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=sa.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Oe(e):n===3?new O(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?bt(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?bt(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=ua.exec(t))?new O(e[1],e[2],e[3],1):(e=fa.exec(t))?new O(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=la.exec(t))?bt(e[1],e[2],e[3],e[4]):(e=ca.exec(t))?bt(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=ha.exec(t))?Be(e[1],e[2]/100,e[3]/100,1):(e=da.exec(t))?Be(e[1],e[2]/100,e[3]/100,e[4]):Ce.hasOwnProperty(t)?Oe(Ce[t]):t==="transparent"?new O(NaN,NaN,NaN,0):null}function Oe(t){return new O(t>>16&255,t>>8&255,t&255,1)}function bt(t,e,n,r){return r<=0&&(t=e=n=NaN),new O(t,e,n,r)}function ma(t){return t instanceof vt||(t=j(t)),t?(t=t.rgb(),new O(t.r,t.g,t.b,t.opacity)):new O}function Dt(t,e,n,r){return arguments.length===1?ma(t):new O(t,e,n,r??1)}function O(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}_e(O,Dt,An(vt,{brighter(t){return t=t==null?Ot:Math.pow(Ot,t),new O(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?dt:Math.pow(dt,t),new O(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new O(Q(this.r),Q(this.g),Q(this.b),zt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:De,formatHex:De,formatHex8:ya,formatRgb:ze,toString:ze}));function De(){return`#${K(this.r)}${K(this.g)}${K(this.b)}`}function ya(){return`#${K(this.r)}${K(this.g)}${K(this.b)}${K((isNaN(this.opacity)?1:this.opacity)*255)}`}function ze(){const t=zt(this.opacity);return`${t===1?"rgb(":"rgba("}${Q(this.r)}, ${Q(this.g)}, ${Q(this.b)}${t===1?")":`, ${t})`}`}function zt(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Q(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function K(t){return t=Q(t),(t<16?"0":"")+t.toString(16)}function Be(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new P(t,e,n,r)}function Nn(t){if(t instanceof P)return new P(t.h,t.s,t.l,t.opacity);if(t instanceof vt||(t=j(t)),!t)return new P;if(t instanceof P)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,f=(o+i)/2;return s?(e===o?a=(n-r)/s+(n<r)*6:n===o?a=(r-e)/s+2:a=(e-n)/s+4,s/=f<.5?o+i:2-o-i,a*=60):s=f>0&&f<1?0:a,new P(a,s,f,t.opacity)}function _a(t,e,n,r){return arguments.length===1?Nn(t):new P(t,e,n,r??1)}function P(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}_e(P,_a,An(vt,{brighter(t){return t=t==null?Ot:Math.pow(Ot,t),new P(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?dt:Math.pow(dt,t),new P(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new O(Wt(t>=240?t-240:t+120,i,r),Wt(t,i,r),Wt(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new P(Pe(this.h),kt(this.s),kt(this.l),zt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=zt(this.opacity);return`${t===1?"hsl(":"hsla("}${Pe(this.h)}, ${kt(this.s)*100}%, ${kt(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Pe(t){return t=(t||0)%360,t<0?t+360:t}function kt(t){return Math.max(0,Math.min(1,t||0))}function Wt(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}function wa(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}function va(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,s=r<e-1?t[r+2]:2*o-i;return wa((n-r/e)*e,a,i,o,s)}}const we=t=>()=>t;function xa(t,e){return function(n){return t+n*e}}function ba(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function ka(t){return(t=+t)==1?Mn:function(e,n){return n-e?ba(e,n,t):we(isNaN(e)?n:e)}}function Mn(t,e){var n=e-t;return n?xa(t,n):we(isNaN(t)?e:t)}const Bt=(function t(e){var n=ka(e);function r(i,o){var a=n((i=Dt(i)).r,(o=Dt(o)).r),s=n(i.g,o.g),f=n(i.b,o.b),u=Mn(i.opacity,o.opacity);return function(l){return i.r=a(l),i.g=s(l),i.b=f(l),i.opacity=u(l),i+""}}return r.gamma=t,r})(1);function Aa(t){return function(e){var n=e.length,r=new Array(n),i=new Array(n),o=new Array(n),a,s;for(a=0;a<n;++a)s=Dt(e[a]),r[a]=s.r||0,i[a]=s.g||0,o[a]=s.b||0;return r=t(r),i=t(i),o=t(o),s.opacity=1,function(f){return s.r=r(f),s.g=i(f),s.b=o(f),s+""}}}var Na=Aa(va);function Ma(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function $a(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Sa(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),a;for(a=0;a<r;++a)i[a]=Xt(t[a],e[a]);for(;a<n;++a)o[a]=e[a];return function(s){for(a=0;a<r;++a)o[a]=i[a](s);return o}}function Ea(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function B(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function La(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Xt(t[i],e[i]):r[i]=e[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var re=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ut=new RegExp(re.source,"g");function Ta(t){return function(){return t}}function Ca(t){return function(e){return t(e)+""}}function $n(t,e){var n=re.lastIndex=Ut.lastIndex=0,r,i,o,a=-1,s=[],f=[];for(t=t+"",e=e+"";(r=re.exec(t))&&(i=Ut.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,f.push({i:a,x:B(r,i)})),n=Ut.lastIndex;return n<e.length&&(o=e.slice(n),s[a]?s[a]+=o:s[++a]=o),s.length<2?f[0]?Ca(f[0].x):Ta(e):(e=f.length,function(u){for(var l=0,c;l<e;++l)s[(c=f[l]).i]=c.x(u);return s.join("")})}function Xt(t,e){var n=typeof e,r;return e==null||n==="boolean"?we(e):(n==="number"?B:n==="string"?(r=j(e))?(e=r,Bt):$n:e instanceof j?Bt:e instanceof Date?Ea:$a(e)?Ma:Array.isArray(e)?Sa:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?La:B)(t,e)}function Sn(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var Fe=180/Math.PI,ie={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function En(t,e,n,r,i,o){var a,s,f;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(f=t*n+e*r)&&(n-=t*f,r-=e*f),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,f/=s),t*r<e*n&&(t=-t,e=-e,f=-f,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*Fe,skewX:Math.atan(f)*Fe,scaleX:a,scaleY:s}}var At;function Ia(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?ie:En(e.a,e.b,e.c,e.d,e.e,e.f)}function Ra(t){return t==null||(At||(At=document.createElementNS("http://www.w3.org/2000/svg","g")),At.setAttribute("transform",t),!(t=At.transform.baseVal.consolidate()))?ie:(t=t.matrix,En(t.a,t.b,t.c,t.d,t.e,t.f))}function Ln(t,e,n,r){function i(u){return u.length?u.pop()+" ":""}function o(u,l,c,h,y,A){if(u!==c||l!==h){var d=y.push("translate(",null,e,null,n);A.push({i:d-4,x:B(u,c)},{i:d-2,x:B(l,h)})}else(c||h)&&y.push("translate("+c+e+h+n)}function a(u,l,c,h){u!==l?(u-l>180?l+=360:l-u>180&&(u+=360),h.push({i:c.push(i(c)+"rotate(",null,r)-2,x:B(u,l)})):l&&c.push(i(c)+"rotate("+l+r)}function s(u,l,c,h){u!==l?h.push({i:c.push(i(c)+"skewX(",null,r)-2,x:B(u,l)}):l&&c.push(i(c)+"skewX("+l+r)}function f(u,l,c,h,y,A){if(u!==c||l!==h){var d=y.push(i(y)+"scale(",null,",",null,")");A.push({i:d-4,x:B(u,c)},{i:d-2,x:B(l,h)})}else(c!==1||h!==1)&&y.push(i(y)+"scale("+c+","+h+")")}return function(u,l){var c=[],h=[];return u=t(u),l=t(l),o(u.translateX,u.translateY,l.translateX,l.translateY,c,h),a(u.rotate,l.rotate,c,h),s(u.skewX,l.skewX,c,h),f(u.scaleX,u.scaleY,l.scaleX,l.scaleY,c,h),u=l=null,function(y){for(var A=-1,d=h.length,g;++A<d;)c[(g=h[A]).i]=g.x(y);return c.join("")}}}var Oa=Ln(Ia,"px, ","px)","deg)"),Da=Ln(Ra,", ",")",")"),it=0,ft=0,ot=0,Tn=1e3,Pt,lt,Ft=0,tt=0,Jt=0,gt=typeof performance=="object"&&performance.now?performance:Date,Cn=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function ve(){return tt||(Cn(za),tt=gt.now()+Jt)}function za(){tt=0}function qt(){this._call=this._time=this._next=null}qt.prototype=xe.prototype={constructor:qt,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?ve():+n)+(e==null?0:+e),!this._next&&lt!==this&&(lt?lt._next=this:Pt=this,lt=this),this._call=t,this._time=n,ae()},stop:function(){this._call&&(this._call=null,this._time=1/0,ae())}};function xe(t,e,n){var r=new qt;return r.restart(t,e,n),r}function Ba(){ve(),++it;for(var t=Pt,e;t;)(e=tt-t._time)>=0&&t._call.call(void 0,e),t=t._next;--it}function qe(){tt=(Ft=gt.now())+Jt,it=ft=0;try{Ba()}finally{it=0,Fa(),tt=0}}function Pa(){var t=gt.now(),e=t-Ft;e>Tn&&(Jt-=e,Ft=t)}function Fa(){for(var t,e=Pt,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Pt=n);lt=t,ae(r)}function ae(t){if(!it){ft&&(ft=clearTimeout(ft));var e=t-tt;e>24?(t<1/0&&(ft=setTimeout(qe,t-gt.now()-Jt)),ot&&(ot=clearInterval(ot))):(ot||(Ft=gt.now(),ot=setInterval(Pa,Tn)),it=1,Cn(qe))}}function He(t,e,n){var r=new qt;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var qa=pe("start","end","cancel","interrupt"),Ha=[],In=0,Ve=1,oe=2,Lt=3,Ge=4,se=5,Tt=6;function Yt(t,e,n,r,i,o){var a=t.__transition;if(!a)t.__transition={};else if(n in a)return;Va(t,n,{name:e,index:r,group:i,on:qa,tween:Ha,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:In})}function be(t,e){var n=q(t,e);if(n.state>In)throw new Error("too late; already scheduled");return n}function V(t,e){var n=q(t,e);if(n.state>Lt)throw new Error("too late; already running");return n}function q(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Va(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=xe(o,0,n.time);function o(u){n.state=Ve,n.timer.restart(a,n.delay,n.time),n.delay<=u&&a(u-n.delay)}function a(u){var l,c,h,y;if(n.state!==Ve)return f();for(l in r)if(y=r[l],y.name===n.name){if(y.state===Lt)return He(a);y.state===Ge?(y.state=Tt,y.timer.stop(),y.on.call("interrupt",t,t.__data__,y.index,y.group),delete r[l]):+l<e&&(y.state=Tt,y.timer.stop(),y.on.call("cancel",t,t.__data__,y.index,y.group),delete r[l])}if(He(function(){n.state===Lt&&(n.state=Ge,n.timer.restart(s,n.delay,n.time),s(u))}),n.state=oe,n.on.call("start",t,t.__data__,n.index,n.group),n.state===oe){for(n.state=Lt,i=new Array(h=n.tween.length),l=0,c=-1;l<h;++l)(y=n.tween[l].value.call(t,t.__data__,n.index,n.group))&&(i[++c]=y);i.length=c+1}}function s(u){for(var l=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(f),n.state=se,1),c=-1,h=i.length;++c<h;)i[c].call(t,l);n.state===se&&(n.on.call("end",t,t.__data__,n.index,n.group),f())}function f(){n.state=Tt,n.timer.stop(),delete r[e];for(var u in r)return;delete t.__transition}}function Ga(t,e){var n=t.__transition,r,i,o=!0,a;if(n){e=e==null?null:e+"";for(a in n){if((r=n[a]).name!==e){o=!1;continue}i=r.state>oe&&r.state<se,r.state=Tt,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[a]}o&&delete t.__transition}}function Xa(t){return this.each(function(){Ga(this,t)})}function Ja(t,e){var n,r;return function(){var i=V(this,t),o=i.tween;if(o!==n){r=n=o;for(var a=0,s=r.length;a<s;++a)if(r[a].name===e){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function Ya(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=V(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:e,value:n},f=0,u=i.length;f<u;++f)if(i[f].name===e){i[f]=s;break}f===u&&i.push(s)}o.tween=i}}function Wa(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=q(this.node(),n).tween,i=0,o=r.length,a;i<o;++i)if((a=r[i]).name===t)return a.value;return null}return this.each((e==null?Ja:Ya)(n,t,e))}function ke(t,e,n){var r=t._id;return t.each(function(){var i=V(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return q(i,r).value[e]}}function Rn(t,e){var n;return(typeof e=="number"?B:e instanceof j?Bt:(n=j(e))?(e=n,Bt):$n)(t,e)}function Ua(t){return function(){this.removeAttribute(t)}}function Za(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ka(t,e,n){var r,i=n+"",o;return function(){var a=this.getAttribute(t);return a===i?null:a===r?o:o=e(r=a,n)}}function Qa(t,e,n){var r,i=n+"",o;return function(){var a=this.getAttributeNS(t.space,t.local);return a===i?null:a===r?o:o=e(r=a,n)}}function ja(t,e,n){var r,i,o;return function(){var a,s=n(this),f;return s==null?void this.removeAttribute(t):(a=this.getAttribute(t),f=s+"",a===f?null:a===r&&f===i?o:(i=f,o=e(r=a,s)))}}function to(t,e,n){var r,i,o;return function(){var a,s=n(this),f;return s==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),f=s+"",a===f?null:a===r&&f===i?o:(i=f,o=e(r=a,s)))}}function eo(t,e){var n=Gt(t),r=n==="transform"?Da:Rn;return this.attrTween(t,typeof e=="function"?(n.local?to:ja)(n,r,ke(this,"attr."+t,e)):e==null?(n.local?Za:Ua)(n):(n.local?Qa:Ka)(n,r,e))}function no(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function ro(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function io(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&ro(t,o)),n}return i._value=e,i}function ao(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&no(t,o)),n}return i._value=e,i}function oo(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Gt(t);return this.tween(n,(r.local?io:ao)(r,e))}function so(t,e){return function(){be(this,t).delay=+e.apply(this,arguments)}}function uo(t,e){return e=+e,function(){be(this,t).delay=e}}function fo(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?so:uo)(e,t)):q(this.node(),e).delay}function lo(t,e){return function(){V(this,t).duration=+e.apply(this,arguments)}}function co(t,e){return e=+e,function(){V(this,t).duration=e}}function ho(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?lo:co)(e,t)):q(this.node(),e).duration}function po(t,e){if(typeof e!="function")throw new Error;return function(){V(this,t).ease=e}}function go(t){var e=this._id;return arguments.length?this.each(po(e,t)):q(this.node(),e).ease}function mo(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;V(this,t).ease=n}}function yo(t){if(typeof t!="function")throw new Error;return this.each(mo(this._id,t))}function _o(t){typeof t!="function"&&(t=gn(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,s=r[i]=[],f,u=0;u<a;++u)(f=o[u])&&t.call(f,f.__data__,u,o)&&s.push(f);return new Y(r,this._parents,this._name,this._id)}function wo(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var f=e[s],u=n[s],l=f.length,c=a[s]=new Array(l),h,y=0;y<l;++y)(h=f[y]||u[y])&&(c[y]=h);for(;s<r;++s)a[s]=e[s];return new Y(a,this._parents,this._name,this._id)}function vo(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function xo(t,e,n){var r,i,o=vo(e)?be:V;return function(){var a=o(this,t),s=a.on;s!==r&&(i=(r=s).copy()).on(e,n),a.on=i}}function bo(t,e){var n=this._id;return arguments.length<2?q(this.node(),n).on.on(t):this.each(xo(n,t,e))}function ko(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Ao(){return this.on("end.remove",ko(this._id))}function No(t){var e=this._name,n=this._id;typeof t!="function"&&(t=ge(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s=r[a],f=s.length,u=o[a]=new Array(f),l,c,h=0;h<f;++h)(l=s[h])&&(c=t.call(l,l.__data__,h,s))&&("__data__"in l&&(c.__data__=l.__data__),u[h]=c,Yt(u[h],e,n,h,u,q(l,n)));return new Y(o,this._parents,e,n)}function Mo(t){var e=this._name,n=this._id;typeof t!="function"&&(t=pn(t));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var f=r[s],u=f.length,l,c=0;c<u;++c)if(l=f[c]){for(var h=t.call(l,l.__data__,c,f),y,A=q(l,n),d=0,g=h.length;d<g;++d)(y=h[d])&&Yt(y,e,n,d,h,A);o.push(h),a.push(l)}return new Y(o,a,e,n)}var $o=wt.prototype.constructor;function So(){return new $o(this._groups,this._parents)}function Eo(t,e){var n,r,i;return function(){var o=rt(this,t),a=(this.style.removeProperty(t),rt(this,t));return o===a?null:o===n&&a===r?i:i=e(n=o,r=a)}}function On(t){return function(){this.style.removeProperty(t)}}function Lo(t,e,n){var r,i=n+"",o;return function(){var a=rt(this,t);return a===i?null:a===r?o:o=e(r=a,n)}}function To(t,e,n){var r,i,o;return function(){var a=rt(this,t),s=n(this),f=s+"";return s==null&&(f=s=(this.style.removeProperty(t),rt(this,t))),a===f?null:a===r&&f===i?o:(i=f,o=e(r=a,s))}}function Co(t,e){var n,r,i,o="style."+e,a="end."+o,s;return function(){var f=V(this,t),u=f.on,l=f.value[o]==null?s||(s=On(e)):void 0;(u!==n||i!==l)&&(r=(n=u).copy()).on(a,i=l),f.on=r}}function Io(t,e,n){var r=(t+="")=="transform"?Oa:Rn;return e==null?this.styleTween(t,Eo(t,r)).on("end.style."+t,On(t)):typeof e=="function"?this.styleTween(t,To(t,r,ke(this,"style."+t,e))).each(Co(this._id,t)):this.styleTween(t,Lo(t,r,e),n).on("end.style."+t,null)}function Ro(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Oo(t,e,n){var r,i;function o(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&Ro(t,a,n)),r}return o._value=e,o}function Do(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Oo(t,e,n??""))}function zo(t){return function(){this.textContent=t}}function Bo(t){return function(){var e=t(this);this.textContent=e??""}}function Po(t){return this.tween("text",typeof t=="function"?Bo(ke(this,"text",t)):zo(t==null?"":t+""))}function Fo(t){return function(e){this.textContent=t.call(this,e)}}function qo(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&Fo(i)),e}return r._value=t,r}function Ho(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,qo(t))}function Vo(){for(var t=this._name,e=this._id,n=Dn(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,f,u=0;u<s;++u)if(f=a[u]){var l=q(f,e);Yt(f,t,n,u,a,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new Y(r,this._parents,t,n)}function Go(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(o,a){var s={value:a},f={value:function(){--i===0&&o()}};n.each(function(){var u=V(this,r),l=u.on;l!==t&&(e=(t=l).copy(),e._.cancel.push(s),e._.interrupt.push(s),e._.end.push(f)),u.on=e}),i===0&&o()})}var Xo=0;function Y(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Dn(){return++Xo}var X=wt.prototype;Y.prototype={constructor:Y,select:No,selectAll:Mo,selectChild:X.selectChild,selectChildren:X.selectChildren,filter:_o,merge:wo,selection:So,transition:Vo,call:X.call,nodes:X.nodes,node:X.node,size:X.size,empty:X.empty,each:X.each,on:bo,attr:eo,attrTween:oo,style:Io,styleTween:Do,text:Po,textTween:Ho,remove:Ao,tween:Wa,delay:fo,duration:ho,ease:go,easeVarying:yo,end:Go,[Symbol.iterator]:X[Symbol.iterator]};function Jo(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Yo={time:null,delay:0,duration:250,ease:Jo};function Wo(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Uo(t){var e,n;t instanceof Y?(e=t._id,t=t._name):(e=Dn(),(n=Yo).time=ve(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,f,u=0;u<s;++u)(f=a[u])&&Yt(f,t,e,u,a,n||Wo(f,e));return new Y(r,this._parents,t,e)}wt.prototype.interrupt=Xa;wt.prototype.transition=Uo;const ue=Math.PI,fe=2*ue,Z=1e-6,Zo=fe-Z;function zn(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Ko(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return zn;const n=10**e;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class Qo{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?zn:Ko(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,o,a){this._append`C${+e},${+n},${+r},${+i},${this._x1=+o},${this._y1=+a}`}arcTo(e,n,r,i,o){if(e=+e,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let a=this._x1,s=this._y1,f=r-e,u=i-n,l=a-e,c=s-n,h=l*l+c*c;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(h>Z)if(!(Math.abs(c*f-u*l)>Z)||!o)this._append`L${this._x1=e},${this._y1=n}`;else{let y=r-a,A=i-s,d=f*f+u*u,g=y*y+A*A,p=Math.sqrt(d),m=Math.sqrt(h),w=o*Math.tan((ue-Math.acos((d+h-g)/(2*p*m)))/2),v=w/m,k=w/p;Math.abs(v-1)>Z&&this._append`L${e+v*l},${n+v*c}`,this._append`A${o},${o},0,0,${+(c*y>l*A)},${this._x1=e+k*f},${this._y1=n+k*u}`}}arc(e,n,r,i,o,a){if(e=+e,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),f=r*Math.sin(i),u=e+s,l=n+f,c=1^a,h=a?i-o:o-i;this._x1===null?this._append`M${u},${l}`:(Math.abs(this._x1-u)>Z||Math.abs(this._y1-l)>Z)&&this._append`L${u},${l}`,r&&(h<0&&(h=h%fe+fe),h>Zo?this._append`A${r},${r},0,1,${c},${e-s},${n-f}A${r},${r},0,1,${c},${this._x1=u},${this._y1=l}`:h>Z&&this._append`A${r},${r},0,${+(h>=ue)},${c},${this._x1=e+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function F(t){return function(){return t}}function Xe(t){return(t()-.5)*1e-6}function jo(t){return t.index}function Je(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function ts(t){var e=jo,n=c,r,i=F(30),o,a,s,f,u,l=1;t==null&&(t=[]);function c(g){return 1/Math.min(s[g.source.index],s[g.target.index])}function h(g){for(var p=0,m=t.length;p<l;++p)for(var w=0,v,k,b,_,x,M,S;w<m;++w)v=t[w],k=v.source,b=v.target,_=b.x+b.vx-k.x-k.vx||Xe(u),x=b.y+b.vy-k.y-k.vy||Xe(u),M=Math.sqrt(_*_+x*x),M=(M-o[w])/M*g*r[w],_*=M,x*=M,b.vx-=_*(S=f[w]),b.vy-=x*S,k.vx+=_*(S=1-S),k.vy+=x*S}function y(){if(a){var g,p=a.length,m=t.length,w=new Map(a.map((k,b)=>[e(k,b,a),k])),v;for(g=0,s=new Array(p);g<m;++g)v=t[g],v.index=g,typeof v.source!="object"&&(v.source=Je(w,v.source)),typeof v.target!="object"&&(v.target=Je(w,v.target)),s[v.source.index]=(s[v.source.index]||0)+1,s[v.target.index]=(s[v.target.index]||0)+1;for(g=0,f=new Array(m);g<m;++g)v=t[g],f[g]=s[v.source.index]/(s[v.source.index]+s[v.target.index]);r=new Array(m),A(),o=new Array(m),d()}}function A(){if(a)for(var g=0,p=t.length;g<p;++g)r[g]=+n(t[g],g,t)}function d(){if(a)for(var g=0,p=t.length;g<p;++g)o[g]=+i(t[g],g,t)}return h.initialize=function(g,p){a=g,u=p,y()},h.links=function(g){return arguments.length?(t=g,y(),h):t},h.id=function(g){return arguments.length?(e=g,h):e},h.iterations=function(g){return arguments.length?(l=+g,h):l},h.strength=function(g){return arguments.length?(n=typeof g=="function"?g:F(+g),A(),h):n},h.distance=function(g){return arguments.length?(i=typeof g=="function"?g:F(+g),d(),h):i},h}const es=1664525,ns=1013904223,Ye=4294967296;function rs(){let t=1;return()=>(t=(es*t+ns)%Ye)/Ye}var is=10,as=Math.PI*(3-Math.sqrt(5));function os(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,s=new Map,f=xe(c),u=pe("tick","end"),l=rs();t==null&&(t=[]);function c(){h(),u.call("tick",e),n<r&&(f.stop(),u.call("end",e))}function h(d){var g,p=t.length,m;d===void 0&&(d=1);for(var w=0;w<d;++w)for(n+=(o-n)*i,s.forEach(function(v){v(n)}),g=0;g<p;++g)m=t[g],m.fx==null?m.x+=m.vx*=a:(m.x=m.fx,m.vx=0),m.fy==null?m.y+=m.vy*=a:(m.y=m.fy,m.vy=0);return e}function y(){for(var d=0,g=t.length,p;d<g;++d){if(p=t[d],p.index=d,p.fx!=null&&(p.x=p.fx),p.fy!=null&&(p.y=p.fy),isNaN(p.x)||isNaN(p.y)){var m=is*Math.sqrt(.5+d),w=d*as;p.x=m*Math.cos(w),p.y=m*Math.sin(w)}(isNaN(p.vx)||isNaN(p.vy))&&(p.vx=p.vy=0)}}function A(d){return d.initialize&&d.initialize(t,l),d}return y(),e={tick:h,restart:function(){return f.restart(c),e},stop:function(){return f.stop(),e},nodes:function(d){return arguments.length?(t=d,y(),s.forEach(A),e):t},alpha:function(d){return arguments.length?(n=+d,e):n},alphaMin:function(d){return arguments.length?(r=+d,e):r},alphaDecay:function(d){return arguments.length?(i=+d,e):+i},alphaTarget:function(d){return arguments.length?(o=+d,e):o},velocityDecay:function(d){return arguments.length?(a=1-d,e):1-a},randomSource:function(d){return arguments.length?(l=d,s.forEach(A),e):l},force:function(d,g){return arguments.length>1?(g==null?s.delete(d):s.set(d,A(g)),e):s.get(d)},find:function(d,g,p){var m=0,w=t.length,v,k,b,_,x;for(p==null?p=1/0:p*=p,m=0;m<w;++m)_=t[m],v=d-_.x,k=g-_.y,b=v*v+k*k,b<p&&(x=_,p=b);return x},on:function(d,g){return arguments.length>1?(u.on(d,g),e):u.on(d)}}}function ss(t){var e=F(.1),n,r,i;typeof t!="function"&&(t=F(t==null?0:+t));function o(s){for(var f=0,u=n.length,l;f<u;++f)l=n[f],l.vx+=(i[f]-l.x)*r[f]*s}function a(){if(n){var s,f=n.length;for(r=new Array(f),i=new Array(f),s=0;s<f;++s)r[s]=isNaN(i[s]=+t(n[s],s,n))?0:+e(n[s],s,n)}}return o.initialize=function(s){n=s,a()},o.strength=function(s){return arguments.length?(e=typeof s=="function"?s:F(+s),a(),o):e},o.x=function(s){return arguments.length?(t=typeof s=="function"?s:F(+s),a(),o):t},o}function us(t){var e=F(.1),n,r,i;typeof t!="function"&&(t=F(t==null?0:+t));function o(s){for(var f=0,u=n.length,l;f<u;++f)l=n[f],l.vy+=(i[f]-l.y)*r[f]*s}function a(){if(n){var s,f=n.length;for(r=new Array(f),i=new Array(f),s=0;s<f;++s)r[s]=isNaN(i[s]=+t(n[s],s,n))?0:+e(n[s],s,n)}}return o.initialize=function(s){n=s,a()},o.strength=function(s){return arguments.length?(e=typeof s=="function"?s:F(+s),a(),o):e},o.y=function(s){return arguments.length?(t=typeof s=="function"?s:F(+s),a(),o):t},o}function fs(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Ht(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function at(t){return t=Ht(Math.abs(t)),t?t[1]:NaN}function ls(t,e){return function(n,r){for(var i=n.length,o=[],a=0,s=t[0],f=0;i>0&&s>0&&(f+s+1>r&&(s=Math.max(1,r-f)),o.push(n.substring(i-=s,i+s)),!((f+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(e)}}function cs(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var hs=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Vt(t){if(!(e=hs.exec(t)))throw new Error("invalid format: "+t);var e;return new Ae({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Vt.prototype=Ae.prototype;function Ae(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Ae.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function ds(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Bn;function ps(t,e){var n=Ht(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(Bn=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Ht(t,Math.max(0,e+o-1))[0]}function We(t,e){var n=Ht(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Ue={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:fs,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>We(t*100,e),r:We,s:ps,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Ze(t){return t}var Ke=Array.prototype.map,Qe=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function gs(t){var e=t.grouping===void 0||t.thousands===void 0?Ze:ls(Ke.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?Ze:cs(Ke.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"":t.minus+"",f=t.nan===void 0?"NaN":t.nan+"";function u(c){c=Vt(c);var h=c.fill,y=c.align,A=c.sign,d=c.symbol,g=c.zero,p=c.width,m=c.comma,w=c.precision,v=c.trim,k=c.type;k==="n"?(m=!0,k="g"):Ue[k]||(w===void 0&&(w=12),v=!0,k="g"),(g||h==="0"&&y==="=")&&(g=!0,h="0",y="=");var b=d==="$"?n:d==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",_=d==="$"?r:/[%p]/.test(k)?a:"",x=Ue[k],M=/[defgprs%]/.test(k);w=w===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function S(N){var E=b,$=_,L,C,I;if(k==="c")$=x(N)+$,N="";else{N=+N;var D=N<0||1/N<0;if(N=isNaN(N)?f:x(Math.abs(N),w),v&&(N=ds(N)),D&&+N==0&&A!=="+"&&(D=!1),E=(D?A==="("?A:s:A==="-"||A==="("?"":A)+E,$=(k==="s"?Qe[8+Bn/3]:"")+$+(D&&A==="("?")":""),M){for(L=-1,C=N.length;++L<C;)if(I=N.charCodeAt(L),48>I||I>57){$=(I===46?i+N.slice(L+1):N.slice(L))+$,N=N.slice(0,L);break}}}m&&!g&&(N=e(N,1/0));var xt=E.length+N.length+$.length,G=xt<p?new Array(p-xt+1).join(h):"";switch(m&&g&&(N=e(G+N,G.length?p-$.length:1/0),G=""),y){case"<":N=E+N+$+G;break;case"=":N=E+G+N+$;break;case"^":N=G.slice(0,xt=G.length>>1)+E+N+$+G.slice(xt);break;default:N=G+E+N+$;break}return o(N)}return S.toString=function(){return c+""},S}function l(c,h){var y=u((c=Vt(c),c.type="f",c)),A=Math.max(-8,Math.min(8,Math.floor(at(h)/3)))*3,d=Math.pow(10,-A),g=Qe[8+A/3];return function(p){return y(d*p)+g}}return{format:u,formatPrefix:l}}var Nt,Pn,Fn;ms({thousands:",",grouping:[3],currency:["$",""]});function ms(t){return Nt=gs(t),Pn=Nt.format,Fn=Nt.formatPrefix,Nt}function ys(t){return Math.max(0,-at(Math.abs(t)))}function _s(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(at(e)/3)))*3-at(Math.abs(t)))}function ws(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,at(e)-at(t))+1}function vs(t){var e=0,n=t.children,r=n&&n.length;if(!r)e=1;else for(;--r>=0;)e+=n[r].value;t.value=e}function xs(){return this.eachAfter(vs)}function bs(t,e){let n=-1;for(const r of this)t.call(e,r,++n,this);return this}function ks(t,e){for(var n=this,r=[n],i,o,a=-1;n=r.pop();)if(t.call(e,n,++a,this),i=n.children)for(o=i.length-1;o>=0;--o)r.push(i[o]);return this}function As(t,e){for(var n=this,r=[n],i=[],o,a,s,f=-1;n=r.pop();)if(i.push(n),o=n.children)for(a=0,s=o.length;a<s;++a)r.push(o[a]);for(;n=i.pop();)t.call(e,n,++f,this);return this}function Ns(t,e){let n=-1;for(const r of this)if(t.call(e,r,++n,this))return r}function Ms(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})}function $s(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function Ss(t){for(var e=this,n=Es(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r}function Es(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}function Ls(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function Ts(){return Array.from(this)}function Cs(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function Is(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function*Rs(){var t=this,e,n=[t],r,i,o;do for(e=n.reverse(),n=[];t=e.pop();)if(yield t,r=t.children)for(i=0,o=r.length;i<o;++i)n.push(r[i]);while(n.length)}function Ne(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=zs)):e===void 0&&(e=Ds);for(var n=new mt(t),r,i=[n],o,a,s,f;r=i.pop();)if((a=e(r.data))&&(f=(a=Array.from(a)).length))for(r.children=a,s=f-1;s>=0;--s)i.push(o=a[s]=new mt(a[s])),o.parent=r,o.depth=r.depth+1;return n.eachBefore(Ps)}function Os(){return Ne(this).eachBefore(Bs)}function Ds(t){return t.children}function zs(t){return Array.isArray(t)?t[1]:null}function Bs(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function Ps(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function mt(t){this.data=t,this.depth=this.height=0,this.parent=null}mt.prototype=Ne.prototype={constructor:mt,count:xs,each:bs,eachAfter:As,eachBefore:ks,find:Ns,sum:Ms,sort:$s,path:Ss,ancestors:Ls,descendants:Ts,leaves:Cs,links:Is,copy:Os,[Symbol.iterator]:Rs};function Fs(t,e){return t.parent===e.parent?1:2}function Zt(t){var e=t.children;return e?e[0]:t.t}function Kt(t){var e=t.children;return e?e[e.length-1]:t.t}function qs(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function Hs(t){for(var e=0,n=0,r=t.children,i=r.length,o;--i>=0;)o=r[i],o.z+=e,o.m+=e,e+=o.s+(n+=o.c)}function Vs(t,e,n){return t.a.parent===e.parent?t.a:n}function Ct(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}Ct.prototype=Object.create(mt.prototype);function Gs(t){for(var e=new Ct(t,0),n,r=[e],i,o,a,s;n=r.pop();)if(o=n._.children)for(n.children=new Array(s=o.length),a=s-1;a>=0;--a)r.push(i=n.children[a]=new Ct(o[a],a)),i.parent=n;return(e.parent=new Ct(null,0)).children=[e],e}function Xs(){var t=Fs,e=1,n=1,r=null;function i(u){var l=Gs(u);if(l.eachAfter(o),l.parent.m=-l.z,l.eachBefore(a),r)u.eachBefore(f);else{var c=u,h=u,y=u;u.eachBefore(function(m){m.x<c.x&&(c=m),m.x>h.x&&(h=m),m.depth>y.depth&&(y=m)});var A=c===h?1:t(c,h)/2,d=A-c.x,g=e/(h.x+A+d),p=n/(y.depth||1);u.eachBefore(function(m){m.x=(m.x+d)*g,m.y=m.depth*p})}return u}function o(u){var l=u.children,c=u.parent.children,h=u.i?c[u.i-1]:null;if(l){Hs(u);var y=(l[0].z+l[l.length-1].z)/2;h?(u.z=h.z+t(u._,h._),u.m=u.z-y):u.z=y}else h&&(u.z=h.z+t(u._,h._));u.parent.A=s(u,h,u.parent.A||c[0])}function a(u){u._.x=u.z+u.parent.m,u.m+=u.parent.m}function s(u,l,c){if(l){for(var h=u,y=u,A=l,d=h.parent.children[0],g=h.m,p=y.m,m=A.m,w=d.m,v;A=Kt(A),h=Zt(h),A&&h;)d=Zt(d),y=Kt(y),y.a=u,v=A.z+m-h.z-g+t(A._,h._),v>0&&(qs(Vs(A,u,c),u,v),g+=v,p+=v),m+=A.m,g+=h.m,w+=d.m,p+=y.m;A&&!Kt(y)&&(y.t=A,y.m+=m-p),h&&!Zt(d)&&(d.t=h,d.m+=g-w,c=u)}return c}function f(u){u.x*=e,u.y=u.depth*n}return i.separation=function(u){return arguments.length?(t=u,i):t},i.size=function(u){return arguments.length?(r=!1,e=+u[0],n=+u[1],i):r?null:[e,n]},i.nodeSize=function(u){return arguments.length?(r=!0,e=+u[0],n=+u[1],i):r?[e,n]:null},i}function qn(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Js(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const je=Symbol("implicit");function Hn(){var t=new Me,e=[],n=[],r=je;function i(o){let a=t.get(o);if(a===void 0){if(r!==je)return r;t.set(o,a=e.push(o)-1)}return n[a%n.length]}return i.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new Me;for(const a of o)t.has(a)||t.set(a,e.push(a)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return Hn(e,n).unknown(r)},qn.apply(i,arguments),i}function Ys(t){return function(){return t}}function Ws(t){return+t}var tn=[0,1];function W(t){return t}function le(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Ys(isNaN(e)?NaN:.5)}function Us(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Zs(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=le(i,r),o=n(a,o)):(r=le(r,i),o=n(o,a)),function(s){return o(r(s))}}function Ks(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=le(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(s){var f=sr(t,s,1,r)-1;return o[f](i[f](s))}}function Qs(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function js(){var t=tn,e=tn,n=Xt,r,i,o,a=W,s,f,u;function l(){var h=Math.min(t.length,e.length);return a!==W&&(a=Us(t[0],t[h-1])),s=h>2?Ks:Zs,f=u=null,c}function c(h){return h==null||isNaN(h=+h)?o:(f||(f=s(t.map(r),e,n)))(r(a(h)))}return c.invert=function(h){return a(i((u||(u=s(e,t.map(r),B)))(h)))},c.domain=function(h){return arguments.length?(t=Array.from(h,Ws),l()):t.slice()},c.range=function(h){return arguments.length?(e=Array.from(h),l()):e.slice()},c.rangeRound=function(h){return e=Array.from(h),n=Sn,l()},c.clamp=function(h){return arguments.length?(a=h?!0:W,l()):a!==W},c.interpolate=function(h){return arguments.length?(n=h,l()):n},c.unknown=function(h){return arguments.length?(o=h,c):o},function(h,y){return r=h,i=y,l()}}function tu(){return js()(W,W)}function eu(t,e,n,r){var i=gr(t,e,n),o;switch(r=Vt(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(o=_s(i,a))&&(r.precision=o),Fn(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=ws(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=ys(i))&&(r.precision=o-(r.type==="%")*2);break}}return Pn(r)}function Vn(t){var e=t.domain;return t.ticks=function(n){var r=e();return pr(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return eu(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,o=r.length-1,a=r[i],s=r[o],f,u,l=10;for(s<a&&(u=a,a=s,s=u,u=i,i=o,o=u);l-- >0;){if(u=te(a,s,n),u===f)return r[i]=a,r[o]=s,e(r);if(u>0)a=Math.floor(a/u)*u,s=Math.ceil(s/u)*u;else if(u<0)a=Math.ceil(a*u)/u,s=Math.floor(s*u)/u;else break;f=u}return t},t}function Gn(){var t=tu();return t.copy=function(){return Qs(t,Gn())},qn.apply(t,arguments),Vn(t)}function nu(){var t=0,e=1,n,r,i,o,a=W,s=!1,f;function u(c){return c==null||isNaN(c=+c)?f:a(i===0?.5:(c=(o(c)-n)*i,s?Math.max(0,Math.min(1,c)):c))}u.domain=function(c){return arguments.length?([t,e]=c,n=o(t=+t),r=o(e=+e),i=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(c){return arguments.length?(s=!!c,u):s},u.interpolator=function(c){return arguments.length?(a=c,u):a};function l(c){return function(h){var y,A;return arguments.length?([y,A]=h,a=c(y,A),u):[a(0),a(1)]}}return u.range=l(Xt),u.rangeRound=l(Sn),u.unknown=function(c){return arguments.length?(f=c,u):f},function(c){return o=c,n=c(t),r=c(e),i=n===r?0:1/(r-n),u}}function ru(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Xn(){var t=Vn(nu()(W));return t.copy=function(){return ru(t,Xn())},Js.apply(t,arguments)}function Jn(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}const iu=Jn("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),au=t=>Na(t[t.length-1]);var ou=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Jn);const su=au(ou);function en(t){return function(){return t}}function uu(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new Qo(e)}var fu=Array.prototype.slice;function lu(t){return t[0]}function cu(t){return t[1]}class hu{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function du(t){return new hu(t,!0)}function pu(t){return t.source}function gu(t){return t.target}function mu(t){let e=pu,n=gu,r=lu,i=cu,o=null,a=null,s=uu(f);function f(){let u;const l=fu.call(arguments),c=e.apply(this,l),h=n.apply(this,l);if(o==null&&(a=t(u=s())),a.lineStart(),l[0]=c,a.point(+r.apply(this,l),+i.apply(this,l)),l[0]=h,a.point(+r.apply(this,l),+i.apply(this,l)),a.lineEnd(),u)return a=null,u+""||null}return f.source=function(u){return arguments.length?(e=u,f):e},f.target=function(u){return arguments.length?(n=u,f):n},f.x=function(u){return arguments.length?(r=typeof u=="function"?u:en(+u),f):r},f.y=function(u){return arguments.length?(i=typeof u=="function"?u:en(+u),f):i},f.context=function(u){return arguments.length?(u==null?o=a=null:a=t(o=u),f):o},f}function yu(){return mu(du)}function ct(t,e,n){this.k=t,this.x=e,this.y=n}ct.prototype={constructor:ct,scale:function(t){return t===1?this:new ct(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new ct(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};ct.prototype;let ce,yt;function _u(t,e,n,r){ce=t.beatLabel,yt=document.getElementById("loader");const{loadBtn:i,exampleBtn:o,totalTreeBtn:a,totalNetworkBtn:s,resetViewBtn:f}=t;i&&(i.onclick=e),o&&(o.onclick=n),a&&(a.onclick=()=>r("total-tree")),s&&(s.onclick=()=>r("total-network")),f&&(f.onclick=()=>r("reset"))}function Yn(){yt&&(yt.style.display="flex")}function Wn(){yt&&(yt.style.display="none")}function he(t){ce&&(ce.textContent=t)}function wu(t,e){const n=ut("#axis-legend");if(n.empty())return;n.html(""),n.append("strong").text("Differenzen pro Beat:");const r=n.append("svg").attr("height",20).attr("width","100%");r.append("defs").append("linearGradient").attr("id","gradient-axis").selectAll("stop").data(e.ticks().map((a,s,f)=>({offset:`${100*s/f.length}%`,color:e(a)}))).enter().append("stop").attr("offset",a=>a.offset).attr("stop-color",a=>a.color),r.append("rect").attr("width","100%").attr("height",15).style("fill","url(#gradient-axis)"),n.append("div").attr("class","legend-labels").html("<span>wenig</span><span>viele</span>")}const vu=["1803_BdA_ED_Op33_1.mei_1808_Zulehner_Op33_1.mei.txt","1803_BdA_ED_Op33_1.mei_1825_Andre_Op33_1.mei.txt","1803_BdA_ED_Op33_1.mei_1826_Schott_Op33_1.mei.txt","1803_BdA_ED_Op33_1.mei_1845_Haslinger_Op33_1.mei.txt","1803_BdA_ED_Op33_1.mei_1864_Breitkopf_Haertel_Op33_1.mei.txt","1808_Zulehner_Op33_1.mei_1825_Andre_Op33_1.mei.txt","1808_Zulehner_Op33_1.mei_1826_Schott_Op33_1.mei.txt","1808_Zulehner_Op33_1.mei_1845_Haslinger_Op33_1.mei.txt","1808_Zulehner_Op33_1.mei_1864_Breitkopf_Haertel_Op33_1.mei.txt","1825_Andre_Op33_1.mei_1826_Schott_Op33_1.mei.txt","1825_Andre_Op33_1.mei_1845_Haslinger_Op33_1.mei.txt","1825_Andre_Op33_1.mei_1864_Breitkopf_Haertel_Op33_1.mei.txt","1826_Schott_Op33_1.mei_1845_Haslinger_Op33_1.mei.txt","1826_Schott_Op33_1.mei_1864_Breitkopf_Haertel_Op33_1.mei.txt","1845_Haslinger_Op33_1.mei_1864_Breitkopf_Haertel_Op33_1.mei.txt"];async function xu(t){if(t.useExample){const e=vu.map(n=>fetch(`/example/diffs/${n}`).then(r=>r.ok?r.text():Promise.reject(new Error(`Datei nicht gefunden: ${n}`))));return Promise.all(e)}else return Promise.all([...t.files].map(e=>e.text()))}function bu(t){let e={},n={},r=[];t.forEach(y=>{const A=y.split(`
`),d=A[0].replace(/--- (.*\/)?/,"").replace(".mei",""),g=A[1].replace(/\+\+\+ (.*\/)?/,"").replace(".mei","");n[d]||(n[d]={id:d}),n[g]||(n[g]={id:g});const p={source:d,target:g,beatCounts:{},beatDetails:{}};let m=null;A.forEach(w=>{if(w.startsWith("@@")){const v=/measure\s+(\d+),.*beat\s+([\d.]+)/.exec(w);if(v){const k=parseInt(v[1],10),b=parseFloat(v[2]);m=`${k}-${b}`,e[m]||(e[m]={measure:k,beat:b})}}else m&&(w.startsWith("+")||w.startsWith("-"))&&(p.beatCounts[m]=(p.beatCounts[m]||0)+1,p.beatDetails[m]||(p.beatDetails[m]=[]),p.beatDetails[m].push(w))}),r.push(p)});const i=Object.keys(e);if(i.length>0){const y={};i.forEach(A=>{const d=e[A];y[d.measure]||(y[d.measure]=new Set),y[d.measure].add(d.beat)}),Object.entries(y).forEach(([A,d])=>{const g=parseInt(A,10),p=Array.from(d).sort((m,w)=>m-w);if(p.length>1){const m=p.slice(1).map((v,k)=>v-p[k]),w=Math.min(...m.filter(v=>v>1e-9));if(w>0&&isFinite(w)){const v=p[0],k=p[p.length-1],b=Math.round((k-v)/w);for(let _=0;_<=b;_++){const x=+(v+_*w).toFixed(6),M=`${g}-${x}`;e[M]||(e[M]={measure:g,beat:x})}}}})}let o=Object.keys(e).filter(y=>e[y]&&typeof e[y].measure<"u");o.sort((y,A)=>{const[d,g]=y.split("-").map(Number),[p,m]=A.split("-").map(Number);return d!==p?d-p:g-m});const a={};o.forEach((y,A)=>a[y]=A);const s=r.map(y=>{const A={},d={};return Object.entries(y.beatCounts).forEach(([g,p])=>{const m=a[g];typeof m<"u"&&(A[m]=p,d[m]=y.beatDetails[g]||[])}),{id:`${y.source}__${y.target}`,source:y.source,target:y.target,beatCounts:A,beatDetails:d}}),f=Object.values(n),u=f.map(y=>({name:y.id})),l=Hn(iu).domain(f.map(y=>y.id)),c=ee(s,y=>ee(Object.values(y.beatCounts)))||1,h=Xn(su).domain([0,c]);return{nodes:f,taxa:u,linkData:s,beatInfo:e,allBeatKeys:o,globalMax:c,nodeColor:l,axisColor:h}}async function Un(t){const e=await xu(t);return bu(e)}let ht;function ku(t,e,n,r,i,o,a,s){if(t.selectAll("*").remove(),!r||r.length===0||!n||n.length===0)return t.append("text").attr("x",20).attr("y",20).text("Keine Daten zum Anzeigen.").attr("fill","#999"),[];const f=t.node().parentElement.getBoundingClientRect().width,u=150,l=40,c=[...new Set(Object.values(i).map(_=>_.measure))].sort((_,x)=>_-x),h=Math.max(f,c.length*100);t.attr("width",h);const A=(h-u-l)/c.length,d={};r.forEach(_=>{const x=i[_];x&&typeof x.measure<"u"&&(d[x.measure]||(d[x.measure]=new Set),d[x.measure].add(x.beat))});const g=[];r.forEach((_,x)=>{const M=i[_];if(!M)return;const S=c.indexOf(M.measure),N=Array.from(d[M.measure]||[]).sort(($,L)=>$-L),E=N.indexOf(M.beat);if(S>-1&&E>-1){const $=u+S*A+(E+.5)*(A/N.length);g.push({idx:x,x:$})}});const p=Array(r.length);g.forEach(_=>{p[_.idx]=_.x});const m=Math.max(20,200/n.length),w=n.length*m;t.attr("height",w),ht=t.append("line").attr("stroke","blue").attr("stroke-width",1.5).attr("opacity",.7).style("pointer-events","none").attr("y1",0).attr("y2",w),n.forEach((_,x)=>{const M=t.append("g").attr("transform",`translate(0, ${x*m})`),S=Gn().domain([0,o]).range([m,0]);M.selectAll("rect").data(mr(r.length)).join("rect").attr("x",N=>p[N]?p[N]-2:-10).attr("y",N=>S(_.beatCounts[N]||0)).attr("width",4).attr("height",N=>m-S(_.beatCounts[N]||0)).attr("fill",N=>(_.beatCounts[N]||0)>0?a(_.beatCounts[N]):"#eee").on("mouseover",(N,E)=>{const $=_.beatDetails[E];!$||$.length===0||e.style("opacity",1).html(`<strong>Details (${$.length}):</strong><br>${$.join("<br>")}`)}).on("mousemove",N=>{e.style("left",N.pageX+15+"px").style("top",N.pageY-28+"px")}).on("mouseleave",()=>{e.style("opacity",0)}),M.append("g").attr("transform",`translate(${u}, 0)`).call(Ar(S).ticks(3)),M.append("text").attr("x",u-8).attr("y",m/2).attr("text-anchor","end").style("font-size","10px").text(_.id.replace("__"," vs "))});const v=de(_=>_.x).left;function k(_){if(!g||g.length===0)return 0;const x=v(g,_,1);if(x<=0)return g[0].idx;if(x>=g.length)return g[g.length-1].idx;const M=_-g[x-1].x,S=g[x].x-_;return M<S?g[x-1].idx:g[x].idx}let b=!1;return t.on("click",_=>{b=!b,b&&s(k(Te(_)[0]))}).on("mousemove",_=>{b&&s(k(Te(_)[0]))}),p}function Zn(t,e){ht&&e&&typeof e[t]<"u"?ht.style("display","block").attr("x1",e[t]).attr("x2",e[t]):ht&&ht.style("display","none")}let et,nn,Mt,rn,an;function Au(t,e,n,r){rn=t.node().getBoundingClientRect().width,an=t.node().getBoundingClientRect().height,t.selectAll("*").remove(),et=os(e).force("link",ts(n).id(i=>i.id)).force("x",ss(rn/2).strength(.1)).force("y",us(an/2).strength(.1)),nn=t.append("g").attr("stroke","#999").attr("stroke-opacity",.6).selectAll("line").data(n).join("line").attr("stroke-width",1.5),Mt=t.append("g").selectAll("g").data(e).join("g"),Mt.append("circle").attr("r",8).attr("fill",i=>r(i.id)).attr("stroke","#fff").attr("stroke-width",1.5),Mt.append("text").text(i=>i.id).attr("x",12).attr("y",3).attr("class","node-label"),et.on("tick",()=>{nn.attr("x1",i=>i.source.x).attr("y1",i=>i.source.y).attr("x2",i=>i.target.x).attr("y2",i=>i.target.y),Mt.attr("transform",i=>`translate(${i.x}, ${i.y})`)})}function Kn(t,e,n,r=!1){if(et){if(r){const i=e.map(s=>({...s,totalDiffs:cn(Object.values(s.beatCounts))})),o=ee(i,s=>s.totalDiffs)||1,a=s=>1-s.totalDiffs/o;et.force("link").links(i).distance(s=>60+(1-a(s))*240)}else{const i=(o,a)=>1-(o.beatCounts[a]||0)/n;et.force("link").links(e).distance(o=>60+(1-i(o,t))*240)}et.alpha(1).restart()}}function Nu(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var st={},U={},$t={},on;function Mu(){return on||(on=1,(function(t){(function(e,n){n(t)})($t,function(e){e.__esModule=!0,e.sort=A;function n(d,g){if(!(d instanceof g))throw new TypeError("Cannot call a class as a function")}var r=32,i=7,o=256;function a(d,g){if(d===g)return 0;var p=String(d),m=String(g);return p===m?0:p<m?-1:1}function s(d){for(var g=0;d>=r;)g|=d&1,d>>=1;return d+g}function f(d,g,p,m){var w=g+1;if(w===p)return 1;if(m(d[w++],d[g])<0){for(;w<p&&m(d[w],d[w-1])<0;)w++;u(d,g,w)}else for(;w<p&&m(d[w],d[w-1])>=0;)w++;return w-g}function u(d,g,p){for(p--;g<p;){var m=d[g];d[g++]=d[p],d[p--]=m}}function l(d,g,p,m,w){for(m===g&&m++;m<p;m++){for(var v=d[m],k=g,b=m;k<b;){var _=k+b>>>1;w(v,d[_])<0?b=_:k=_+1}var x=m-k;switch(x){case 3:d[k+3]=d[k+2];case 2:d[k+2]=d[k+1];case 1:d[k+1]=d[k];break;default:for(;x>0;)d[k+x]=d[k+x-1],x--}d[k]=v}}function c(d,g,p,m,w,v){var k=0,b=0,_=1;if(v(d,g[p+w])>0){for(b=m-w;_<b&&v(d,g[p+w+_])>0;)k=_,_=(_<<1)+1,_<=0&&(_=b);_>b&&(_=b),k+=w,_+=w}else{for(b=w+1;_<b&&v(d,g[p+w-_])<=0;)k=_,_=(_<<1)+1,_<=0&&(_=b);_>b&&(_=b);var x=k;k=w-_,_=w-x}for(k++;k<_;){var M=k+(_-k>>>1);v(d,g[p+M])>0?k=M+1:_=M}return _}function h(d,g,p,m,w,v){var k=0,b=0,_=1;if(v(d,g[p+w])<0){for(b=w+1;_<b&&v(d,g[p+w-_])<0;)k=_,_=(_<<1)+1,_<=0&&(_=b);_>b&&(_=b);var x=k;k=w-_,_=w-x}else{for(b=m-w;_<b&&v(d,g[p+w+_])>=0;)k=_,_=(_<<1)+1,_<=0&&(_=b);_>b&&(_=b),k+=w,_+=w}for(k++;k<_;){var M=k+(_-k>>>1);v(d,g[p+M])<0?_=M:k=M+1}return _}var y=(function(){function d(g,p){n(this,d),this.array=null,this.compare=null,this.minGallop=i,this.length=0,this.tmpStorageLength=o,this.stackLength=0,this.runStart=null,this.runLength=null,this.stackSize=0,this.array=g,this.compare=p,this.length=g.length,this.length<2*o&&(this.tmpStorageLength=this.length>>>1),this.tmp=new Array(this.tmpStorageLength),this.stackLength=this.length<120?5:this.length<1542?10:this.length<119151?19:40,this.runStart=new Array(this.stackLength),this.runLength=new Array(this.stackLength)}return d.prototype.pushRun=function(p,m){this.runStart[this.stackSize]=p,this.runLength[this.stackSize]=m,this.stackSize+=1},d.prototype.mergeRuns=function(){for(;this.stackSize>1;){var p=this.stackSize-2;if(p>=1&&this.runLength[p-1]<=this.runLength[p]+this.runLength[p+1]||p>=2&&this.runLength[p-2]<=this.runLength[p]+this.runLength[p-1])this.runLength[p-1]<this.runLength[p+1]&&p--;else if(this.runLength[p]>this.runLength[p+1])break;this.mergeAt(p)}},d.prototype.forceMergeRuns=function(){for(;this.stackSize>1;){var p=this.stackSize-2;p>0&&this.runLength[p-1]<this.runLength[p+1]&&p--,this.mergeAt(p)}},d.prototype.mergeAt=function(p){var m=this.compare,w=this.array,v=this.runStart[p],k=this.runLength[p],b=this.runStart[p+1],_=this.runLength[p+1];this.runLength[p]=k+_,p===this.stackSize-3&&(this.runStart[p+1]=this.runStart[p+2],this.runLength[p+1]=this.runLength[p+2]),this.stackSize--;var x=h(w[b],w,v,k,0,m);v+=x,k-=x,k!==0&&(_=c(w[v+k-1],w,b,_,_-1,m),_!==0&&(k<=_?this.mergeLow(v,k,b,_):this.mergeHigh(v,k,b,_)))},d.prototype.mergeLow=function(p,m,w,v){var k=this.compare,b=this.array,_=this.tmp,x=0;for(x=0;x<m;x++)_[x]=b[p+x];var M=0,S=w,N=p;if(b[N++]=b[S++],--v===0){for(x=0;x<m;x++)b[N+x]=_[M+x];return}if(m===1){for(x=0;x<v;x++)b[N+x]=b[S+x];b[N+v]=_[M];return}for(var E=this.minGallop;;){var $=0,L=0,C=!1;do if(k(b[S],_[M])<0){if(b[N++]=b[S++],L++,$=0,--v===0){C=!0;break}}else if(b[N++]=_[M++],$++,L=0,--m===1){C=!0;break}while(($|L)<E);if(C)break;do{if($=h(b[S],_,M,m,0,k),$!==0){for(x=0;x<$;x++)b[N+x]=_[M+x];if(N+=$,M+=$,m-=$,m<=1){C=!0;break}}if(b[N++]=b[S++],--v===0){C=!0;break}if(L=c(_[M],b,S,v,0,k),L!==0){for(x=0;x<L;x++)b[N+x]=b[S+x];if(N+=L,S+=L,v-=L,v===0){C=!0;break}}if(b[N++]=_[M++],--m===1){C=!0;break}E--}while($>=i||L>=i);if(C)break;E<0&&(E=0),E+=2}if(this.minGallop=E,E<1&&(this.minGallop=1),m===1){for(x=0;x<v;x++)b[N+x]=b[S+x];b[N+v]=_[M]}else{if(m===0)throw new Error("mergeLow preconditions were not respected");for(x=0;x<m;x++)b[N+x]=_[M+x]}},d.prototype.mergeHigh=function(p,m,w,v){var k=this.compare,b=this.array,_=this.tmp,x=0;for(x=0;x<v;x++)_[x]=b[w+x];var M=p+m-1,S=v-1,N=w+v-1,E=0,$=0;if(b[N--]=b[M--],--m===0){for(E=N-(v-1),x=0;x<v;x++)b[E+x]=_[x];return}if(v===1){for(N-=m,M-=m,$=N+1,E=M+1,x=m-1;x>=0;x--)b[$+x]=b[E+x];b[N]=_[S];return}for(var L=this.minGallop;;){var C=0,I=0,D=!1;do if(k(_[S],b[M])<0){if(b[N--]=b[M--],C++,I=0,--m===0){D=!0;break}}else if(b[N--]=_[S--],I++,C=0,--v===1){D=!0;break}while((C|I)<L);if(D)break;do{if(C=m-h(_[S],b,p,m,m-1,k),C!==0){for(N-=C,M-=C,m-=C,$=N+1,E=M+1,x=C-1;x>=0;x--)b[$+x]=b[E+x];if(m===0){D=!0;break}}if(b[N--]=_[S--],--v===1){D=!0;break}if(I=v-c(b[M],_,0,v,v-1,k),I!==0){for(N-=I,S-=I,v-=I,$=N+1,E=S+1,x=0;x<I;x++)b[$+x]=_[E+x];if(v<=1){D=!0;break}}if(b[N--]=b[M--],--m===0){D=!0;break}L--}while(C>=i||I>=i);if(D)break;L<0&&(L=0),L+=2}if(this.minGallop=L,L<1&&(this.minGallop=1),v===1){for(N-=m,M-=m,$=N+1,E=M+1,x=m-1;x>=0;x--)b[$+x]=b[E+x];b[N]=_[S]}else{if(v===0)throw new Error("mergeHigh preconditions were not respected");for(E=N-(v-1),x=0;x<v;x++)b[E+x]=_[x]}},d})();function A(d,g,p,m){if(!Array.isArray(d))throw new TypeError("Can only sort arrays");g?typeof g!="function"&&(m=p,p=g,g=a):g=a,p||(p=0),m||(m=d.length);var w=m-p;if(!(w<2)){var v=0;if(w<r){v=f(d,p,m,g),l(d,p,m,p+v,g);return}var k=new y(d,g),b=s(w);do{if(v=f(d,p,m,g),v<b){var _=w;_>b&&(_=b),l(d,p,p+_,p+v,g),v=_}k.pushRun(p,v),k.mergeRuns(),w-=v,p+=v}while(w!==0);k.forceMergeRuns()}}})})($t)),$t}var Qt,sn;function $u(){return sn||(sn=1,Qt=Mu()),Qt}var un;function Qn(){if(un)return U;un=1,Object.defineProperty(U,"__esModule",{value:!0}),U.allocateSquareMatrix=r,U.arrayCopy=i,U.sumRows=o,U.sortWithIndices=a;var t=$u(),e=n(t);function n(s){if(s&&s.__esModule)return s;var f={};if(s!=null)for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(f[u]=s[u]);return f.default=s,f}function r(s){for(var f=arguments.length<=1||arguments[1]===void 0?null:arguments[1],u=new Array(s),l=0;l<s;l++)u[l]=new Array(s),f!==null&&u[l].fill(f);return u}function i(s){for(var f=new Array(s.length),u=s.length;u--;)f[u]=s[u];return f}function o(s){for(var f=void 0,u=s.length,l=new Array(u),c=0;c<u;c++){f=0;for(var h=0;h<u;h++)s[c][h]!==void 0&&(f+=s[c][h]);l[c]=f}return l}function a(s){for(var f=arguments.length<=1||arguments[1]===void 0?-1:arguments[1],u=arguments.length<=2||arguments[2]===void 0?!1:arguments[2],l=s.length,c=new Array(l),h=new Array(l),y=0,A=0;A<l;A++)s[A]===-1||A===f||(c[y]=A,h[y++]=s[A]);c.length=y,h.length=y,u?e.sort(c,function(g,p){return s[g]-s[p]}):c.sort(function(g,p){return s[g]-s[p]}),e.sort(c,function(g,p){return s[g]-s[p]}),h.sortIndices=c;for(var d=0;d<y;d++)h[d]=s[c[d]];return h}return U}var fn;function Su(){if(fn)return st;fn=1,Object.defineProperty(st,"__esModule",{value:!0}),st.RapidNeighborJoining=void 0;var t=(function(){function i(o,a){for(var s=0;s<a.length;s++){var f=a[s];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(o,f.key,f)}}return function(o,a,s){return a&&i(o.prototype,a),s&&i(o,s),o}})(),e=Qn();function n(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}st.RapidNeighborJoining=(function(){function i(o,a){var s=arguments.length<=2||arguments[2]===void 0?!1:arguments[2],f=arguments.length<=3||arguments[3]===void 0?function(h){return h.name}:arguments[3];if(n(this,i),a.length!=o.length){console.error("Row/column size of the distance matrix does not agree with the size of taxa matrix");return}var u=this.N=a.length;if(this.cN=this.N,s){this.D=new Array(u);for(var l=0;l<u;l++)this.D[l]=(0,e.arrayCopy)(o[l])}else this.D=o;this.taxa=a,this.labelToTaxon={},this.currIndexToLabel=new Array(u),this.rowChange=new Array(u),this.newRow=new Array(u),this.labelToNode=new Array(2*u),this.nextIndex=u,this.initializeSI(),this.removedIndices=new Set,this.indicesLeft=new Set;for(var c=0;c<u;c++)this.currIndexToLabel[c]=c,this.indicesLeft.add(c);return this.rowSumMax=0,this.PNewick="",this.taxonIdAccessor=f,this}return t(i,[{key:"initializeSI",value:function(){var a=this.N;this.I=new Array(a),this.S=new Array(a);for(var s=0;s<a;s++){var f=(0,e.sortWithIndices)(this.D[s],s,!0);this.S[s]=f,this.I[s]=f.sortIndices}}},{key:"search",value:function(){for(var a=1/0,s=this.D,f=this.cN,u=f-2,l=this.S,c=this.I,h=this.rowSums,y=this.removedIndices,A=this.rowSumMax,d=void 0,g=-1,p=-1,m=void 0,w=0;w<this.N;w++)y.has(w)||(m=c[w][0],!y.has(m)&&(d=s[w][m]*u-h[w]-h[m],d<a&&(a=d,g=w,p=m)));for(var v=0;v<this.N;v++)if(!y.has(v)){for(var k=0;k<l[v].length;k++)if(m=c[v][k],!y.has(m)){if(l[v][k]*u-h[v]-A>a)break;d=s[v][m]*u-h[v]-h[m],d<a&&(a=d,g=v,p=m)}}return{minI:g,minJ:p}}},{key:"run",value:function(){var a=void 0,s=void 0,f=void 0,u=void 0,l=void 0,c=void 0,h=void 0,y=void 0,A=void 0,d=this;function g(k,b){var _=void 0;return k<d.N?(_=new r(d.taxa[k],b),d.labelToNode[k]=_):(_=d.labelToNode[k],_.setLength(b)),_}this.rowSums=(0,e.sumRows)(this.D);for(var p=0;p<this.cN;p++)this.rowSums[p]>this.rowSumMax&&(this.rowSumMax=this.rowSums[p]);for(;this.cN>2;){var m=this.search();a=m.minI,s=m.minJ,f=.5*this.D[a][s]+(this.rowSums[a]-this.rowSums[s])/(2*this.cN-4),u=this.D[a][s]-f,l=this.currIndexToLabel[a],c=this.currIndexToLabel[s],h=g(l,f),y=g(c,u),A=new r(null,null,h,y),this.recalculateDistanceMatrix(a,s);var w=(0,e.sortWithIndices)(this.D[s],s,!0);this.S[s]=w,this.I[s]=w.sortIndices,this.S[a]=this.I[a]=[],this.cN--,this.labelToNode[this.nextIndex]=A,this.currIndexToLabel[a]=-1,this.currIndexToLabel[s]=this.nextIndex++}var v=this.indicesLeft.values();a=v.next().value,s=v.next().value,l=this.currIndexToLabel[a],c=this.currIndexToLabel[s],f=u=this.D[a][s]/2,h=g(l,f),y=g(c,u),this.P=new r(null,null,h,y)}},{key:"recalculateDistanceMatrix",value:function(a,s){var f=this.D,u=f.length,l=0,c=void 0,h=void 0,y=this.removedIndices,A=this.rowSums,d=this.newRow,g=this.rowChange,p=0;y.add(a);for(var m=0;m<u;m++)y.has(m)||(c=f[a][m]+f[s][m],h=f[a][s],d[m]=.5*(c-h),l+=d[m],g[m]=-.5*(c+h));for(var w=0;w<u;w++)f[a][w]=-1,f[w][a]=-1,!y.has(w)&&(f[s][w]=d[w],f[w][s]=d[w],A[w]+=g[w],A[w]>p&&(p=A[w]));A[a]=0,A[s]=l,l>p&&(p=l),this.rowSumMax=p,this.indicesLeft.delete(a)}},{key:"createNewickTree",value:function(a){if(a.taxon)this.PNewick+=this.taxonIdAccessor(a.taxon);else{this.PNewick+="(";for(var s=0;s<a.children.length;s++)this.createNewickTree(a.children[s]),s<a.children.length-1&&(this.PNewick+=",");this.PNewick+=")"}a.length&&(this.PNewick+=":"+a.length)}},{key:"getAsObject",value:function(){return this.P}},{key:"getAsNewick",value:function(){return this.PNewick="",this.createNewickTree(this.P),this.PNewick+=";",this.PNewick}}]),i})();var r=(function(){function i(){var o=arguments.length<=0||arguments[0]===void 0?null:arguments[0],a=arguments.length<=1||arguments[1]===void 0?null:arguments[1],s=arguments.length<=2||arguments[2]===void 0?null:arguments[2],f=arguments.length<=3||arguments[3]===void 0?null:arguments[3];n(this,i),this.taxon=o,this.length=a,this.children=[],s!==null&&this.children.push(s),f!==null&&this.children.push(f)}return t(i,[{key:"setLength",value:function(a){this.length=a}}]),i})();return st}var jt,ln;function Eu(){return ln||(ln=1,jt={RapidNeighborJoining:Su().RapidNeighborJoining,allocateSquareMatrix:Qn().allocateSquareMatrix}),jt}var Lu=Eu();const Tu=Nu(Lu);let J,z,jn;function Cu(t,e,n){z=e,jn=n,t.selectAll("*").remove(),J=t.append("g")}function tr(t){if(!t)return null;const e=new Tu.RapidNeighborJoining(t,z,!1,n=>n.name);return e.run(),e.getAsObject()}function er(t){if(!J||!t){J&&J.selectAll("*").remove();return}J.selectAll("*").remove();const{width:e,height:n}=J.node().parentElement.getBoundingClientRect(),r=Ne(t,a=>a.children);Xs().size([n-40,e-200])(r),J.attr("transform","translate(80, 20)"),J.selectAll("path.link").data(r.links()).enter().append("path").attr("fill","none").attr("stroke","#555").attr("d",yu().x(a=>a.y).y(a=>a.x));const o=J.selectAll("g.node").data(r.descendants()).enter().append("g").attr("transform",a=>`translate(${a.y},${a.x})`);o.append("circle").attr("r",4.5).attr("fill",a=>a.children?"#555":jn(a.data.taxon.name)),o.append("text").attr("dy","0.31em").attr("x",a=>a.children?-10:10).style("text-anchor",a=>a.children?"end":"start").text(a=>a.data.taxon?.name||"").attr("class","node-label")}function Iu(t,e){const n=()=>z?z.length:0,r=Array.from({length:n()},()=>Array(n()).fill(0));for(let i=0;i<n();i++)for(let o=i+1;o<n();o++){const a=z[i].name,s=z[o].name,f=e.find(l=>{const c=typeof l.source=="object"?l.source.id:l.source,h=typeof l.target=="object"?l.target.id:l.target;return c===a&&h===s||h===a&&c===s}),u=f&&f.beatCounts[t]||0;r[i][o]=r[o][i]=u}return r}function Ru(t,e,n){z=n;const r=Iu(t,e),i=tr(r);er(i)}function Ou(t,e){z=e;const n=()=>z?z.length:0,r=t.map(a=>({...a,totalDiffs:cn(Object.values(a.beatCounts))})),i=Array.from({length:n()},()=>Array(n()).fill(0));for(let a=0;a<n();a++)for(let s=a+1;s<n();s++){const f=z[a].name,u=z[s].name,l=r.find(c=>{const h=typeof c.source=="object"?c.source.id:c.source,y=typeof c.target=="object"?c.target.id:c.target;return h===f&&y===u||y===f&&h===u});i[a][s]=i[s][a]=l?l.totalDiffs:0}const o=tr(i);er(o)}const T={state:{},elements:{}};window.addEventListener("DOMContentLoaded",Du);function Du(){T.elements={netSvg:ut("#network"),treeSvg:ut("#tree"),axSvg:ut("#axis"),beatSlider:document.getElementById("beatSlider"),beatLabel:document.getElementById("beatLabel"),tooltip:ut("#tooltip"),fileInput:document.getElementById("diffFiles")},_u({loadBtn:document.getElementById("loadBtn"),exampleBtn:document.getElementById("exampleBtn"),totalTreeBtn:document.getElementById("totalTreeBtn"),totalNetworkBtn:document.getElementById("totalNetworkBtn"),resetViewBtn:document.getElementById("resetViewBtn"),beatLabel:T.elements.beatLabel},()=>zu(T.elements.fileInput.files),Bu,Pu),T.elements.beatSlider.oninput=()=>{T.state.isLiveView&&_t(T.elements.beatSlider.value)},oa('input[name="visType"]').on("change",()=>{T.state.isLiveView&&_t(T.elements.beatSlider.value)})}async function zu(t){if(!(!t||t.length===0)){Yn();try{T.state=await Un({files:t}),nr()}catch(e){console.error("Fehler beim Verarbeiten der Dateien:",e),alert("Fehler beim Verarbeiten der Dateien.")}finally{Wn()}}}async function Bu(){Yn();try{T.state=await Un({useExample:!0}),nr()}catch(t){console.error("Fehler beim Laden der Beispieldaten:",t),alert("Fehler beim Laden der Beispieldaten.")}finally{Wn()}}function nr(){const{nodes:t,linkData:e,beatInfo:n,allBeatKeys:r,globalMax:i,nodeColor:o,axisColor:a,taxa:s}=T.state,{netSvg:f,treeSvg:u,axSvg:l,beatSlider:c,tooltip:h}=T.elements;wu(o,a);const y=ku(l,h,e,r,n,i,a,_t);T.state.beatX=y,Au(f,t,e,o),Cu(u,s,o),T.state.taxa=s,T.state.isLiveView=!0,c.min=0,c.max=r.length>0?r.length-1:0,c.disabled=!1,_t(0)}function _t(t){if(!T.state.allBeatKeys||T.state.allBeatKeys.length===0)return;const{allBeatKeys:e,beatInfo:n,beatX:r,linkData:i,globalMax:o,taxa:a}=T.state,{netSvg:s,treeSvg:f,beatSlider:u}=T.elements;t=Math.max(0,Math.min(e.length-1,+t)),he(`Live-Ansicht | Takt: ${n[e[t]].measure}, Beat: ${n[e[t]].beat.toFixed(2)}`),Zn(t,r),u.value=t,document.querySelector('input[name="visType"]:checked').value==="network"?(s.style("display","block"),f.style("display","none"),Kn(t,i,o)):(s.style("display","none"),f.style("display","block"),Ru(t,i,a))}function Pu(t){const{netSvg:e,treeSvg:n,beatSlider:r}=T.elements;T.state.isLiveView=!1,r.disabled=!0,Zn(null,null),t==="total-network"?(he("Gesamt-Ansicht (Netzwerk)"),e.style("display","block"),n.style("display","none"),Kn(null,T.state.linkData,T.state.globalMax,!0)):t==="total-tree"?(he("Gesamt-Ansicht (Baum)"),e.style("display","none"),n.style("display","block"),Ou(T.state.linkData,T.state.taxa)):t==="reset"&&(T.state.isLiveView=!0,r.disabled=!1,_t(r.value))}
